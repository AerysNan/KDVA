syntax = "proto3";
option go_package = "./;pc";

service CloudForEdge{
  rpc AddEdge (AddEdgeRequest) returns (AddEdgeResponse) {}
  rpc UploadFrame (UploadFrameRequest) returns (UploadFrameResponse) {}
  rpc RemoveEdge (RemoveEdgeRequest) returns (RemoveEdgeResponse) {}
}

message AddEdgeRequest {
  string address = 1;
}

message AddEdgeResponse {
  int64 id = 1;
}

message UploadFrameRequest {
  int64 edge = 1;
  int64 source = 2;
  int64 index = 3;
  bytes content = 4;
  bytes annotation = 5;
}

message UploadFrameResponse {
  double accuracy = 1;
}

message RemoveEdgeRequest {
  int64 id = 1;
}

message RemoveEdgeResponse {}

service CloudForTrainer {
  rpc DeliverModel (DeliverModelRequest) returns (DeliverModelResponse) {}
  rpc ReportAccuracy (ReportAccuracyRequest) returns (ReportAccuracyResponse) {}
}

message DeliverModelRequest {
  int64 edge = 1;
  int64 source = 2;
  int64 epoch = 3;
  bytes model = 4;
}

message DeliverModelResponse {}

message ReportAccuracyRequest {
  int64 edge = 1;
  int64 source = 2;
  int64 begin = 3;
  int64 end = 4;
  double accuracy = 5;
}

message ReportAccuracyResponse {}
