syntax = "proto3";
option go_package = "./;pe";

service EdgeForSource {
  rpc AddSource (AddSourceRequest) returns (AddSourceResponse) {}
  rpc SendFrame (SendFrameRequest) returns (SendFrameResponse) {}
  rpc RemoveSource(RemoveSourceRequest) returns(RemoveSourceResponse){}
}

message AddSourceRequest {
  string address = 1;
  int64 fps = 2;
}

message AddSourceResponse {
  int64 id = 1;
}

message SendFrameRequest {
  int64 source = 1;
  int64 index = 2;
  bytes content = 3;
}

message SendFrameResponse {}

message RemoveSourceRequest {
  int64 id = 1;
}

message RemoveSourceResponse {}

service EdgeForCloud {
  rpc LoadModel (LoadModelRequest) returns (LoadModelResponse) {}
}

message LoadModelRequest {
  int64 source = 1;
  int64 epoch = 2;
  bytes model = 3;
}

message LoadModelResponse {}